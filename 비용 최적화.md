# AWS 비용 관리

## 비용 최적화
불필요한 비용을 제거하고 경제적으로 리소르를 운영하여 비즈니스 목표를 달성하는 요소

- 비용 투명화
- 소유 비용 절감
- 사용량 기반의 운영 비용
- 규모의 경제

## 컴퓨팅 자원 구매 옵션
- On-Demand : 비즈니스를 예측하기 어려운 신규 서비스 혹은 중단이 발생하면 안 되는 서비스에 적합
- Reserved(에약제 / 약정) : 1년 혹은 3년으로 약정을 하여 비용 할인. 항상 사용 중이며 `장기간 활용할 리소스`에 적합
- Spot : 남은 자원에 대한 `경매 방식` 으로 온디멘드 대비`80~90%` 저렴. 로그 분석 및 예측 같은 단기적으로 수요가 많은 서비스에 적합
- Dedicated : 특정 고객을 위한 물리적인 리소스 자원이며 규제 및 법적인 문제가 민간함 시스템에 적합

## 효율적인 배포 정책 (Blue/Green)
<img src ="https://user-images.githubusercontent.com/45276804/104006032-4a41fb00-51e9-11eb-8cad-fc29ec2f1d25.png">

지속적인 통합(CI)과 지속적인 전달(CD) 운용이 잘 되어야
Blue : Version 1 -> Green : V.2 같은 탄력적인 배포정책이 가능함

### 우수 모범 사례
Netflix : Spinnaker

### 고가용성 및 탄력성 방안 
- EC2 인스턴스가 Multi AZ에 걸쳐서(이중화되어) 동작되고 있는가?
- Multi AZ에 걸쳐서 ELB를 활용하고 있는가?
- 자동화된 인스턴스의 확장과 복구를 위해 Autoscailing 을 활용하고 있는가?
- CloudWatch 매트릭을 활용해 모니터링과 알람을 연동하고 있는가?
- Elastic IP의 Static 한 특성을 활용 하여 인스턴스에 매핑하였는가?

### DR 및 백업 관리
- 호율적익 DR 정책은 `단일 컴포넌트의 복구`뿐만이 아니고 애플리케이션 단에서의 `예상된 DR 시나리오의 수행`을 포함
- DR정책은 지역 간 이중화, 글로벌 트래픽 관리 혹은 로드 밸런싱, 모니터링, 지역 대 지역 간 복구들을 포함해야 한다.
- 체크 리스트 
    - 데이터 저장, AMI 혹은 타 지역(region)에 추가 인스턴스가 있는 확인하였는가?
    - Route 53을 통해 DNS에 기반한 지역간  fail-over를 사용하고 있는가?
    - Glacier를 통해서 데이터 보관을 하고 있는가?
    - 데이터베이스 log shipping과 같은 비동기형의 데이터 복제 기술을 사용하고 있는가?
    - EBS Snapshot 복제와 혹은 AMI 복제를 지역 간 하고 있는가?

### AWS 운영 기본 체크리스트
- 잠재적인 위험요소와 통상적인 인프라 go-live 에 관련한 사항
- 비용 관리 및 계정 관리를 위한 관리 시스템을 개발하였는가?
- 조직 안에 다수의 계정 과금에 대한 통합 관리 방안은 결정하였는가?
- AWS에서 사용 중인 리소스들의 확인 및 변경사항 추적을 위한 정책을 가지고 있는가?
- AWS API, 콘솔, OS, 네트워크와 데이터의 보안과 접근을 위한 정책을 개발하였는가?
- AWS 리소스와 연동하여 장애 관리 방법과 적합한 모니터링 툴을 산정하였는가?

### Infrastructure 서비스 모델
<img src="https://user-images.githubusercontent.com/45276804/104007811-df45f380-51eb-11eb-8b5e-330471be035b.png">

### Abstracted 서비스 모델 (PaaS or SaaS형)
<img src="https://user-images.githubusercontent.com/45276804/104007898-03a1d000-51ec-11eb-8a24-426786a6a21d.png">
